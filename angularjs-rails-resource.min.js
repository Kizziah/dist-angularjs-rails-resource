/**
 * 
 * @version v0.1.7 - 2013-11-03
 * @link 
 * @author 
 */
!function(){function a(b,c){var d;b&&angular.isObject(b)&&angular.forEach(b,function(e,f){d=c(f),d!==f&&(b[d]=e,delete b[f]),a(e,c)})}function b(a){return angular.isString(a)?a.replace(/_[\w\d]/g,function(a,b,c){return 0===b?a:c.charAt(b+1).toUpperCase()}):a}function c(a){return angular.isString(a)?a.replace(/[A-Z]/g,function(a,b){return 0===b?a:"_"+a.toLowerCase()}):a}angular.module("rails",["ng"]),angular.module("rails").factory("railsFieldRenamingTransformer",function(){return function(b){return a(b,c),b}}),angular.module("rails").factory("railsFieldRenamingInterceptor",function(){return function(c){return c.then(function(c){return a(c.data,b),c})}}),angular.module("rails").factory("railsRootWrappingTransformer",function(){return function(a,b){var c={};return c[angular.isArray(a)?b.rootPluralName:b.rootName]=a,c}}),angular.module("rails").factory("railsRootWrappingInterceptor",function(){return function(a){var b=a.resource;return b?a.then(function(a){return a.data&&a.data.hasOwnProperty(b.rootName)?a.data=a.data[b.rootName]:a.data&&a.data.hasOwnProperty(b.rootPluralName)&&(a.data=a.data[b.rootPluralName]),a}):a}}),angular.module("rails").factory("railsResourceFactory",["$http","$q","$injector","$interpolate",function(a,b,c,d){function e(a){var b;return angular.isFunction(a)?a:(-1===a.indexOf("{{")&&(a+="/{{id}}"),b=d(a),function(c){return a=b(c),"/"===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),a})}function f(b){function d(a){a||(a={});var b=function(a){return{resource:d,response:a,then:function(a){return this.response=a(this.response,this.resource),b(this.response)}}},c=d.callInterceptors(b({data:a||{}})).response.data;angular.extend(this,c)}var f=b.requestTransformers||["railsRootWrappingTransformer","railsFieldRenamingTransformer"],g=b.responseInterceptors||["railsFieldRenamingInterceptor","railsRootWrappingInterceptor"];return d.setUrl=function(a){d.url=e(a)},d.setUrl(b.url),d.rootName=b.name,d.rootPluralName=b.pluralName||b.name+"s",d.httpConfig=b.httpConfig||{},d.httpConfig.headers=angular.extend({Accept:"application/json","Content-Type":"application/json"},d.httpConfig.headers||{}),d.requestTransformers=[],d.responseInterceptors=[],d.defaultParams=b.defaultParams,d.beforeResponse=function(a){d.responseInterceptors.push(function(b){return b.then(function(c){return a(c.data,b.resource),c})})},d.beforeRequest=function(a){d.requestTransformers.push(function(b,c){return a(b,c),b})},angular.forEach(g,function(a){d.responseInterceptors.push(angular.isString(a)?c.get(a):c.invoke(a))}),angular.forEach(f,function(a){d.requestTransformers.push(angular.isString(a)?c.get(a):c.invoke(a))}),d.transformData=function(a){return angular.forEach(d.requestTransformers,function(b){a=b(a,d)}),a},d.callInterceptors=function(a){return angular.forEach(d.responseInterceptors,function(b){a.resource=d,a=b(a)}),a},d.processResponse=function(a){return a=d.callInterceptors(a),a.then(function(a){var b;return angular.isArray(a.data)?(b=[],angular.forEach(a.data,function(a){b.push(angular.extend(new d,a))})):b=angular.isObject(a.data)?angular.extend(new d,a.data):a.data,b})},d.getParameters=function(a){var b;return d.defaultParams&&(b=d.defaultParams),angular.isObject(a)&&(b=angular.extend(b||{},a)),b},d.getHttpConfig=function(a){var b=d.getParameters(a);return b?angular.extend({params:b},d.httpConfig):angular.copy(d.httpConfig)},d.$url=d.resourceUrl=function(a){return angular.isObject(a)||(a={id:a}),d.url(a||{})},d.$get=function(b,c){return d.processResponse(a.get(b,d.getHttpConfig(c)))},d.query=function(a,b){return d.$get(d.resourceUrl(b),a)},d.get=function(a,b){return d.$get(d.resourceUrl(a),b)},d.prototype.$url=function(){return d.resourceUrl(this)},d.prototype.processResponse=function(a){return a=a.then(function(a){return a.originalData=a.data,a}),a=d.callInterceptors(a),a.then(angular.bind(this,function(a){return a.hasOwnProperty("data")&&angular.isObject(a.data)&&angular.extend(this,a.data),this}))},angular.forEach(["post","put","patch"],function(b){d["$"+b]=function(c,e){var f;return e=d.transformData(angular.copy(e,{})),f=angular.extend({method:b,url:c,data:e},d.getHttpConfig()),d.processResponse(a(f))},d.prototype["$"+b]=function(c){var e,f;return e=d.transformData(angular.copy(this,{})),f=angular.extend({method:b,url:c,data:e},d.getHttpConfig()),this.processResponse(a(f))}}),d.prototype.create=function(){return this.$post(this.$url(),this)},d.prototype.update=function(){return this.$put(this.$url(),this)},d.prototype.isNew=function(){return null==this.id},d.prototype.save=function(){return this.isNew()?this.create():this.update()},d.$delete=function(b){return d.processResponse(a["delete"](b,d.getHttpConfig()))},d.prototype.$delete=function(b){return this.processResponse(a["delete"](b,d.getHttpConfig()))},d.prototype.remove=d.prototype["delete"]=function(){return this.$delete(this.$url())},d}return f}])}();